version: 3

tasks:
  default:
    desc: Default task, builds and runs the project
    deps:
      - run

  build:
    desc: Builds the project
    cmds:
      - go-bindata -o assets.go assets/
      - go build -o release/odh-data-monitor

  install:
    desc: Installs the project to $GOPATH
    cmds:
      - go install

  run:
    desc: Runs the project
    deps:
      - build
      - install
    cmds:
      - odh-data-monitor {{.CLI_ARGS}}

  dev:
    desc: Runs the project in dev mode
    deps:
      - build
      - install
      - clean-all
    cmds:
      - odh-data-monitor {{.CLI_ARGS}}

  clean-all:
    desc: Cleans the project
    deps:
      - clean
      - clean-cfg

  clean:
    desc: Cleans the project
    cmds:
      - go clean -i

  clean-cfg:
    desc: Cleans the project configs
    cmds:
      - rm -r {{.HOME}}/.config/odh-data-monitor